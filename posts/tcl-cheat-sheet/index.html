<!doctype html><html lang=en-us><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="IE=edge"><style type=text/css>body{font-family:monospace}</style><title>Tcl Cheat Sheet</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&display=swap" rel=stylesheet><link rel=stylesheet href=/css/style.css></head><body><header>===================<br>== <a href=https://lxulxu.github.io/>lxulxu's blog</a> ==<br>===================<div style=float:right>Hello there</div><br><p><nav><a href=/><b>Start</b></a>.
<a href=/posts/><b>Posts</b></a>.
<a href=/categories/><b>Categories</b></a>.
<a href=/tags/><b>Tags</b></a>.
<a href=/about/><b>About</b></a>.</nav></p></header><main><article><h1>Tcl Cheat Sheet</h1><b><time>30.08.2022 17:51</time></b>
<a href=/tags/cheat-sheet>cheat-sheet</a>
<a href=/tags/tcl>tcl</a><div><ul><li>基础语法</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span>puts <span style=color:#b8bb26>&#34;Hello World&#34;</span><span style=color:#928374;font-style:italic>#输出</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span><span style=color:#fabd2f>set</span> x [expr <span style=color:#d3869b>1</span> <span style=color:#fe8019>==</span> <span style=color:#d3869b>2</span> ? <span style=color:#d3869b>1</span> : <span style=color:#d3869b>2</span>]<span style=color:#928374;font-style:italic>#设置变量；三元运算符</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span>[exec ls]<span style=color:#928374;font-style:italic>#调用子进程</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span><span style=color:#928374;font-style:italic>#if</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span><span style=color:#fe8019>if</span> { $x <span style=color:#fe8019>&lt;</span> <span style=color:#d3869b>2</span>} { <span style=color:#fe8019>...</span> }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span>elseif { $x <span style=color:#fe8019>==</span> <span style=color:#d3869b>1</span> } { <span style=color:#fe8019>...</span> }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span><span style=color:#928374;font-style:italic>#while</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span><span style=color:#fe8019>while</span> { $x <span style=color:#fe8019>&lt;</span> <span style=color:#d3869b>2</span> } {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span>	incr x
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">14</span><span><span style=color:#928374;font-style:italic>#for</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">15</span><span><span style=color:#fe8019>for</span> { <span style=color:#fabd2f>set</span> i <span style=color:#d3869b>0</span> } { $i <span style=color:#fe8019>&lt;</span> <span style=color:#d3869b>5</span> } { incr i } { <span style=color:#fe8019>...</span> }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">16</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">17</span><span><span style=color:#928374;font-style:italic>#switch</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">18</span><span>switch $x {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">19</span><span>	<span style=color:#d3869b>1</span> { <span style=color:#fe8019>...</span> }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">20</span><span>	<span style=color:#d3869b>2</span> { <span style=color:#fe8019>...</span> }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">21</span><span>	default { <span style=color:#fe8019>...</span> }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">22</span><span>}
</span></span></code></pre></div><ul><li>字符串</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span><span style=color:#fabd2f>set</span> s1 <span style=color:#b8bb26>&#34;_Hello_World_&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span><span style=color:#fabd2f>set</span> s2 <span style=color:#b8bb26>&#34;_&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span>[string length $s1]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span>[string index $s1 <span style=color:#d3869b>0</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span>[string <span style=color:#fabd2f>range</span> $s1 <span style=color:#d3869b>1</span> end]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span>append s1 <span style=color:#b8bb26>&#34;!&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>[string repeat $s1 <span style=color:#d3869b>5</span>]<span style=color:#928374;font-style:italic>#&#34;_Hello_World_&#34;*5</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span>[string toupper $s1]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span>[string tolower $s1]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13</span><span>[string compare $s1 $s2]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">14</span><span>[string equal $s1 $s2]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">15</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">16</span><span>[string first $s2 $s1]<span style=color:#928374;font-style:italic>#s1中第一个匹配s2索引</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">17</span><span>[string last $s2 $s1]<span style=color:#928374;font-style:italic>#s1中最后一次匹配s2索引</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">18</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">19</span><span>[string trim $s1 $s2]<span style=color:#928374;font-style:italic>#-&gt;Hello_World</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">20</span><span>[string trimright $s1 $s2]<span style=color:#928374;font-style:italic>#-&gt;_Hello_World</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">21</span><span>[string trimleft $s1 $s2]<span style=color:#928374;font-style:italic>#-&gt;Hello_World_</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">22</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">23</span><span><span style=color:#fabd2f>set</span> s1 <span style=color:#b8bb26>&#34;abc@163.com&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">24</span><span><span style=color:#fabd2f>set</span> s2 <span style=color:#b8bb26>&#34;*@*.com&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">25</span><span>[string <span style=color:#fe8019>match</span> $s2 $s1]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">26</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">27</span><span>[<span style=color:#fabd2f>format</span> <span style=color:#b8bb26>&#34;</span><span style=color:#b8bb26>%s</span><span style=color:#b8bb26> </span><span style=color:#b8bb26>%x</span><span style=color:#b8bb26> </span><span style=color:#b8bb26>%f</span><span style=color:#b8bb26>&#34;</span> <span style=color:#b8bb26>&#34;tcl&#34;</span> <span style=color:#d3869b>40</span> <span style=color:#d3869b>43.5</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">28</span><span>scan {planet1 <span style=color:#d3869b>0.330</span> planet2 <span style=color:#d3869b>4.87</span>} {planet1 <span style=color:#fe8019>%</span>g planet2 <span style=color:#fe8019>%</span>g}<span style=color:#928374;font-style:italic>#-&gt; 0.330 4.87 </span>
</span></span></code></pre></div><ul><li>列表</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span><span style=color:#928374;font-style:italic>#初始化</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span><span style=color:#fabd2f>set</span> colors {red green blue}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span><span style=color:#fabd2f>set</span> colors [split <span style=color:#b8bb26>&#34;red_green_blue&#34;</span> _]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span><span style=color:#fabd2f>set</span> colors [<span style=color:#fabd2f>list</span> red green blue]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span>[lindex $colors <span style=color:#d3869b>1</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span>[lrange $colors <span style=color:#d3869b>0</span> <span style=color:#d3869b>2</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>[llength $colors]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span>lappend colors <span style=color:#b8bb26>&#34;orange&#34;</span><span style=color:#928374;font-style:italic>#末尾添加元素</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span>lset colors <span style=color:#d3869b>3</span> purple<span style=color:#928374;font-style:italic>#设置第n个元素</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span>[linsert $colors <span style=color:#d3869b>3</span> black white]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span>[lreplace $colors <span style=color:#d3869b>0</span> <span style=color:#d3869b>1</span> black white]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13</span><span>[lsearch $colors black]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">14</span><span>concat $colors {black {white purple}}<span style=color:#928374;font-style:italic>#-&gt;$colors black {white purple}</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">15</span><span>[join $colors <span style=color:#fe8019>/</span>]<span style=color:#928374;font-style:italic>#列表元素以特定分隔符组合为字符串</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">16</span><span>[lsort $colors]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">17</span><span>foreach item $colors { <span style=color:#fe8019>...</span> }<span style=color:#928374;font-style:italic>#遍历</span>
</span></span></code></pre></div><ul><li>字典</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span><span style=color:#928374;font-style:italic>#初始化</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span><span style=color:#fabd2f>dict</span> <span style=color:#fabd2f>set</span> colors c1 red
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span><span style=color:#fabd2f>set</span> colors [<span style=color:#fabd2f>dict</span> create c1 <span style=color:#b8bb26>&#34;black&#34;</span> c2 <span style=color:#b8bb26>&#34;white&#34;</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span>[<span style=color:#fabd2f>dict</span> size $colors]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span>[<span style=color:#fabd2f>dict</span> keys $colors]<span style=color:#928374;font-style:italic>#所有key组合成的列表</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span>[<span style=color:#fabd2f>dict</span> values $colors]<span style=color:#928374;font-style:italic>#所有value组合成的列表</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>[<span style=color:#fabd2f>dict</span> exists $colors c1]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span><span style=color:#928374;font-style:italic>#遍历</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span>foreach item [<span style=color:#fabd2f>dict</span> keys $colors] {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span>	<span style=color:#fabd2f>set</span> value [<span style=color:#fabd2f>dict</span> get $colors item]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13</span><span><span style=color:#fabd2f>dict</span> <span style=color:#fe8019>for</span> {key value} $colors {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">14</span><span>	puts <span style=color:#b8bb26>&#34;$key : $value&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">15</span><span>}
</span></span></code></pre></div><ul><li>IO</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span><span style=color:#928374;font-style:italic>#写入文件</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span><span style=color:#fabd2f>set</span> fp [<span style=color:#fabd2f>open</span> <span style=color:#b8bb26>&#34;input.txt&#34;</span> w<span style=color:#fe8019>+</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span>puts $fp <span style=color:#b8bb26>&#34;Hello world.&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span>close $fp
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span><span style=color:#928374;font-style:italic>#读取文件</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span><span style=color:#fabd2f>set</span> fp [<span style=color:#fabd2f>open</span> <span style=color:#b8bb26>&#34;input.txt&#34;</span> r]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span><span style=color:#fabd2f>set</span> file_data [read $fp]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>close $fp
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span><span style=color:#fabd2f>set</span> fp [<span style=color:#fabd2f>open</span> <span style=color:#b8bb26>&#34;input.txt&#34;</span> r]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span><span style=color:#fe8019>while</span> {<span style=color:#fe8019>%</span> [gets $fp data] <span style=color:#fe8019>&gt;=</span> <span style=color:#d3869b>0</span> <span style=color:#fe8019>%</span>} {<span style=color:#fe8019>%</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span>  puts $data
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13</span><span><span style=color:#fe8019>%</span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">14</span><span>close $fp
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">15</span><span><span style=color:#928374;font-style:italic>#文件名相关操作</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">16</span><span>[file join C:<span style=color:#fe8019>/</span> {Program Files} Tcl tclsh<span style=color:#fe8019>.</span>exe]<span style=color:#928374;font-style:italic>#-&gt;C:/Program Files/Tcl/tclsh.exe</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">17</span><span>[file split x<span style=color:#fe8019>/</span>y<span style=color:#fe8019>/</span>z]<span style=color:#928374;font-style:italic>#-&gt;x y z</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">18</span><span>[file dirname <span style=color:#fe8019>/</span>a<span style=color:#fe8019>/</span>b<span style=color:#fe8019>/</span>main<span style=color:#fe8019>.</span>c]<span style=color:#928374;font-style:italic>#-&gt;/a/b</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">19</span><span>[file extension src<span style=color:#fe8019>/</span>main<span style=color:#fe8019>.</span>c]<span style=color:#928374;font-style:italic>#-&gt;.c</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">20</span><span>[file rootname src<span style=color:#fe8019>/</span>main<span style=color:#fe8019>.</span>c]<span style=color:#928374;font-style:italic>#-&gt;src/main</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">21</span><span>[file tail <span style=color:#fe8019>/</span>a<span style=color:#fe8019>/</span>b<span style=color:#fe8019>/</span>c<span style=color:#fe8019>.</span>txt]<span style=color:#928374;font-style:italic>#-&gt;c.txt</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">22</span><span><span style=color:#928374;font-style:italic>#查找文件</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">23</span><span>glob <span style=color:#fe8019>-</span>nocomplain {{src,backup}<span style=color:#fe8019>/*.</span>[ch]}]<span style=color:#928374;font-style:italic>#-nocomplain:跳过搜索结果为空时报错;{{src,backup}/*.[ch]}:正则匹配搜索文件</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">24</span><span>[glob <span style=color:#fe8019>-</span>directory <span style=color:#fe8019>./</span> <span style=color:#fe8019>-</span>types f <span style=color:#fe8019>-</span>tails <span style=color:#fe8019>*</span>]<span style=color:#928374;font-style:italic>#-directory:指定搜索文件夹;-types:指定搜索对象类型</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">25</span><span><span style=color:#928374;font-style:italic>#文件相关操作</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">26</span><span>file mkdir foo
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">27</span><span>file delete a<span style=color:#fe8019>.</span>txt b<span style=color:#fe8019>.</span>txt <span style=color:#fe8019>*.</span>tmp
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">28</span><span>file delete {<span style=color:#fe8019>*</span>}[glob <span style=color:#fe8019>*</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">29</span><span>file copy a<span style=color:#fe8019>.</span>txt b<span style=color:#fe8019>.</span>txt<span style=color:#928374;font-style:italic>#a.txt复制到b.txt</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">30</span><span>file rename b<span style=color:#fe8019>.</span>txt c<span style=color:#fe8019>.</span>txt<span style=color:#928374;font-style:italic>#b.txt重命名为c.txt</span>
</span></span></code></pre></div><ul><li>正则匹配</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span><span style=color:#928374;font-style:italic>#匹配</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span>regexp {([a<span style=color:#fe8019>-</span>z]<span style=color:#fe8019>*</span>)<span style=color:#fe8019>.</span>([a<span style=color:#fe8019>-</span>z]<span style=color:#fe8019>*</span>)} <span style=color:#b8bb26>&#34;Tcl Command&#34;</span> sm sm1 sm2<span style=color:#928374;font-style:italic>#sm:full match;sm1:sub match 1;sm2:sub match 2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span>regexp <span style=color:#fe8019>-</span>nocase <span style=color:#fe8019>-</span>start <span style=color:#d3869b>4</span> <span style=color:#fe8019>-</span>line <span style=color:#fe8019>--</span> {([a<span style=color:#fe8019>-</span>z]<span style=color:#fe8019>*</span>)<span style=color:#fe8019>.</span>([a<span style=color:#fe8019>-</span>z]<span style=color:#fe8019>*</span>)} <span style=color:#b8bb26>&#34;Tcl</span><span style=color:#b8bb26>\n</span><span style=color:#b8bb26>Command&#34;</span> sm sm1 sm2<span style=color:#928374;font-style:italic>#-nocase：忽视大小写;-start:指定匹配开始位置;-line:跨行匹配</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span><span style=color:#928374;font-style:italic>#替换</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">5</span><span>regsub there <span style=color:#b8bb26>&#34;They lives there lives&#34;</span> their s<span style=color:#928374;font-style:italic>#-&gt;s:They lives their lives</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">6</span><span>regsub <span style=color:#fe8019>-</span><span style=color:#fabd2f>all</span> a ababa zz s<span style=color:#928374;font-style:italic>#-&gt;s:zzbzzbzz</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">7</span><span>regsub <span style=color:#fe8019>-</span><span style=color:#fabd2f>all</span> <span style=color:#fe8019>--</span> (a<span style=color:#fe8019>+</span>)(ba<span style=color:#fe8019>*</span>) aabaabxab {z\<span style=color:#d3869b>2</span>} s<span style=color:#928374;font-style:italic>#-&gt;s:zbaabxzb</span>
</span></span></code></pre></div><ul><li>数学运算</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span>namespace <span style=color:#fe8019>import</span> ::tcl::mathfunc::<span style=color:#fe8019>*</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span>[rand]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span><span style=color:#fabd2f>set</span> x <span style=color:#fe8019>-</span><span style=color:#d3869b>1.2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span><span style=color:#fabd2f>set</span> y <span style=color:#d3869b>2</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span>[<span style=color:#fabd2f>abs</span> $x]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span>[ceil $x]<span style=color:#928374;font-style:italic>#向上取整</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>[floor $x]<span style=color:#928374;font-style:italic>#向下取整</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span>[fmod $x $y]<span style=color:#928374;font-style:italic>#%</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span>[<span style=color:#fabd2f>int</span> $x]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span>[<span style=color:#fabd2f>pow</span> $x $y]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span>[<span style=color:#fabd2f>round</span> $x]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13</span><span>[sqrt $y]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">14</span><span>[<span style=color:#fabd2f>max</span> $x $y]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">15</span><span>[<span style=color:#fabd2f>min</span> $x $y]
</span></span></code></pre></div><ul><li>时间</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">1</span><span><span style=color:#fabd2f>set</span> curr_tm [clock seconds]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">2</span><span>[clock <span style=color:#fabd2f>format</span> $curr_tm <span style=color:#fe8019>-</span><span style=color:#fabd2f>format</span> <span style=color:#fe8019>%</span>H:<span style=color:#fe8019>%</span>M:<span style=color:#fe8019>%</span>S]<span style=color:#928374;font-style:italic>#-&gt;15:34:01</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">3</span><span>[clock <span style=color:#fabd2f>format</span> $curr_tm <span style=color:#fe8019>-</span><span style=color:#fabd2f>format</span> <span style=color:#fe8019>%</span>D]<span style=color:#928374;font-style:italic>#08/29/2022</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">5</span><span><span style=color:#fabd2f>set</span> date <span style=color:#b8bb26>&#34;Jun 15, 2014&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">6</span><span>[clock scan $date <span style=color:#fe8019>-</span><span style=color:#fabd2f>format</span> {<span style=color:#fe8019>%</span>b <span style=color:#fe8019>%</span>d, <span style=color:#fe8019>%</span>Y}]<span style=color:#928374;font-style:italic>#-&gt;1402761600</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">7</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">8</span><span>after <span style=color:#d3869b>500</span><span style=color:#928374;font-style:italic>#休眠n毫秒</span>
</span></span></code></pre></div><ul><li>函数</li></ul><div class=highlight><pre tabindex=0 style=color:#ebdbb2;background-color:#282828;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 1</span><span>proc add {a b} {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 2</span><span>	<span style=color:#fe8019>return</span> [expr $a <span style=color:#fe8019>+</span> $b]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 3</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 5</span><span>[add <span style=color:#d3869b>10</span> <span style=color:#d3869b>30</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 6</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 7</span><span><span style=color:#928374;font-style:italic>#错误与异常</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 8</span><span>catch {<span style=color:#fabd2f>set</span> fp [<span style=color:#fabd2f>open</span> no<span style=color:#fe8019>.</span>txt]} errmsg
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59"> 9</span><span>puts <span style=color:#b8bb26>&#34;ErrorMsg: $errmsg&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">10</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">11</span><span>proc div {a b} {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">12</span><span>  <span style=color:#fe8019>if</span> {$b <span style=color:#fe8019>==</span> <span style=color:#d3869b>0</span>} {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">13</span><span>    error <span style=color:#b8bb26>&#34;Error generated by error&#34;</span> <span style=color:#b8bb26>&#34;Info String for error&#34;</span> <span style=color:#d3869b>401</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">14</span><span>  } <span style=color:#fe8019>else</span> {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">15</span><span>    <span style=color:#fe8019>return</span> [expr $a <span style=color:#fe8019>/</span> $b]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">16</span><span>  }
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">17</span><span>}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">18</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">19</span><span><span style=color:#fe8019>if</span> {[catch {puts <span style=color:#b8bb26>&#34;Result = [div 10 0]&#34;</span>} errmsg]} {
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">20</span><span>  puts <span style=color:#b8bb26>&#34;ErrorMsg: $errmsg&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">21</span><span>  puts <span style=color:#b8bb26>&#34;ErrorCode: $errorCode&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">22</span><span>  puts <span style=color:#b8bb26>&#34;ErrorInfo:</span><span style=color:#b8bb26>\n</span><span style=color:#b8bb26>$errorInfo</span><span style=color:#b8bb26>\n</span><span style=color:#b8bb26>&#34;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#756d59">23</span><span>}
</span></span></code></pre></div></div></article></main><aside><div><div><h3>LATEST POSTS</h3></div><div><ul><li><a href=/posts/y2024q4-media-summary/>Y2024Q4 影视音总结</a></li><li><a href=/posts/tcl_c_api_usage_1/>Tcl C API 概览(一)</a></li><li><a href=/posts/push_back_emplace_back/>C++中的push_back与emplace_back</a></li><li><a href=/posts/y2024q3-media-summary/>Y2024Q3 影视音总结</a></li><li><a href=/posts/y2024q2-media-summary/>Y2024Q2 影视音总结</a></li></ul></div></div></aside><footer><p>&copy; 2024 <a href=https://lxulxu.github.io/><b>lxulxu's blog</b></a>.
<a href=https://github.com/lxulxu><b>Github</b></a>.
<a href=https://space.bilibili.com/7739434><b>Bilibili</b></a>.</p></footer></body></html>